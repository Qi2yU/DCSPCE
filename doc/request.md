# 需求分析文档

[实时更新的需求分析文档链接](https://shimo.im/docs/gO3odpYbVMFp5DqD)，本文档可能会有短暂的滞后性

### 基本定义：

信息：企业基本信息

数据：企业上报的就业信息



## 一些仍不清楚的问题

* 报备的企业基本信息日后是否会有修改的需求？
* 需要改密码功能否？
* 企业查询自己提交的往期信息是否需要体现被驳回、审批合格通过的以及被修改过？
* 在省处被驳回的数据，是否直接退回到企业？
* 政府对企业上报的信息进行删除、修改的详细逻辑？（对，我现在还没明白）
* 往期信息查询的条件是以 “调查期”为单位 还是以 “年月日”为单位？
* **汇总功能**的需求不明确  
    答：可以查查一般的系统汇总功能的样子，然后对其再进行需求分析



## 已经得到初步解决的问题

* 省和市的功能细分：
    * 省独有的: 审核企业备案信息、系统设置
    * 省和市都有的：审核和上报数据、修改数据（代替填报）、部分分析数据功能、查看和导出数据、部分数据分析功能，发布通知（发布的范围不同，市只能对该市下的企业发布通知，省既可以对某几个市的企业发布通知，也可以对企业发布通知）
* **备案信息** (或上报的数据信息) 被驳回时，发通知否？
    答：发通知
* 数据**审核功能和数据查询功能**是否可合并为一个功能？
    答：属于两个业务逻辑，数据审核只审核当期提交的就业数据。数据查询页面查询的是往期一段时间内，某企业上报的数据。
* 一个调查期内**企业可以提交几次数据**？ 
    答：在处于“未提交”和“审批未通过”状态时，企业可以提交一次数据；当处于“已提交待审核”和“审核已通过”状态时，企业不可以提交数据。
* 如果有**企业不交数据**应该怎样处理？
    答：不管他，然后使用“修改数据”功能，将企业的数据由 市、省端 导入，同时记录该处的数据并不是企业自己填写的，而是 市、省端 帮其修改填写的。
* **省**是否需要**审核数据**，**需要审核什么数据**？  
    答：省同样需要审核数据，审核的就是单个企业的数据。
* **上报的逻辑**：
    答：市和省政府都是对单个企业提交的数据进行审核，而非汇总后得到的数据。对于上报功能，有单个上报的功能，也支持勾选后批量上报。



## 需求分析

把整个需求分成十条业务线：

其中三条 企业和政府 需要配合的：

* (qy) 企业信息审核备案 => (lzm) 政府批准备案
* (lc) 企业上报相关数据 => (pwq) 政府对企业上报的数据进行审核并上报，可以驳回
* (cyl) 政府发布通知 => (cyl) 企业查看通知
    一条企业自己的：

* (lc) 查询往期上报数据
    另外六条政府自己的：

* (lzm) 政府对企业基本信息进行查询
* ( ) 政府在企业始终未上报数据时进行代填报并生成日志，日志可删除
* (pwq) 政府对企业往期数据进行查询
* (wyx) 政府对企业往期数据进行汇总分析
* 政府对企业往期数据进行 (wyx) 简单分析 + ( ) 多维分析（比较复杂）
* (lmk) 相关系统设置，包括新增或修改调查期、注册账户、用户权限管理、系统监控等



#### (qy) 企业信息审核备案 => (lzm) 政府批准备案


* 企业拿到账户和密码后，登陆系统
* 此时企业只能进入 "备案信息" 页面 进行信息备案
* 填写相关信息后，企业点 "提交" 后，等待省政府审批
* 省政府审批后，如果审核通过，则企业在通知界面接收到一条 "审核通过"通知
    * 否则，在通知界面接收到一条 "审核未通过"的通知，企业重新进行上述步骤



#### (lzm) 企业备案 + 政府对企业基本信息进行查询

企业备案页面，需满足查看所有已备案企业的详细信息，但不可以修改的基本功能。除此之外还有列表、查询、查看、导出功能。具体来说，首先页面的主要板块显示各企业的词条，词条末端显示企业状态（待审核、已通过、未通过），双击词条可以查看企业的详细信息，并对待审核的企业进行审核。企业词条上部有功能栏，实现筛选、选择时间、选择地区、查询、导出功能。对于各功能，筛选实现了基于待审核、已通过、未通过等企业状态的企业显示；选择时间可以选择在某一时间段内提交备案信息的企业；选择地区可以选择不同市区的企业信息；查询可根据关键字查询相关企业信息；导出可以将当前列表导出为EXCEL文件并保存在本地磁盘。页面最下端有选择上一页、下一页的按键，以及展示当前页是第几页的窗口。对于企业信息详细页面，最上部是企业名称。页面主要部分是企业的信息。页面最下端有审核按钮，可以选择通过、驳回或者返回上一页。若页面审核已通过，则驳回按钮不可点击，通过按钮显示已通过。若页面审核未通过，则驳回按钮不可点击，通过按钮显示未通过。



#### (lc) 企业上报相关数据 => (pwq) 政府对企业上报的数据进行审核并上报，可以驳回

* (前提条件) 企业在基本信息审核通过后，才能进入 "上报信息" 和 "往期信息" 页面
* 填写相关信息后，并提交后，等待省政府审批
* 此时省政府只能 查看、不能修改，要么退回、要么审核通过后上报
* 省政府审批后，如果审核通过，则企业在通知界面接收到一条 "审核通过"通知
    * 否则，在通知界面接收到一条 "审核未通过"的通知，企业重新进行上述步骤
        tips:

* 企业第一次上报相关信息时，建档期和调查期的人数应该是一样的，企业在第一次填报系统时需要特殊判断
* 根据选择的 主要原因、次要原因和实时变动页面格式


#### (cyl) 政府发布通知 => (cyl) 企业查看通知






#### (lc) 企业查询往期上报信息

* (前提条件) 企业在基本信息审核通过后，才能进入 "上报信息" 和 "往期信息" 页面
* 根据一些条件（时间？）筛选相应的往期信息

#### (pwq) 政府对企业往期数据进行查询




#### (待分配) 政府对企业上报的数据进行删除、修改



####  (wyx) 政府对往期数据进行汇总分析




####  (wyx) 政府对往期数据进行图表分析

数据分析总共包括取样分析和图表分析，其中图表分析包括趋势分析和对比分析，其中取样分析为省独有的功能，图表分析为省和市共有的功能，图表分析的样本条件为地区、企业性质、行业

* 取样分析会根据省用户选择的市区显示企业的数量和占比并生成饼状图，默认为选择全部市区，用户可以根据需求来选择不同的市区，该功能的目的在于查看各市的企业情况，反映对应的经济形式
* 趋势分析会根据用户选择的调查期区间和企业条件，显示符合条件的企业在此连续区间内的就业数量变化生成对应的折线图并显示对应的岗位数量变化占比生成对应的表格，该功能目的在于查看在一段时间内符合条件企业的就业情况，由此来判断该条件下的行业状况，并根据岗位数量变化占比具体到单个企业的情况
* 对比分析会根据用户选择的两个调查期和样本条件分析对应的指标并生成对应的图表，指标包括企业总数、建档期总岗位数、调查期总岗位数、岗位变化总数、岗位减少总数、岗位变化数量占比，其中折线图主要反映企业总数、建档期总岗位数、调查期总岗位数，而表格可以反映岗位变化总数、岗位减少总数、岗位变化数量占比，通过对比分析可以重点查看两个调查期对应企业发生的岗位变化

#### （待分配）政府对往期数据进行多维分析




#### (lmk) 相关系统设置(包括新增或修改调查期、注册账户、用户权限管理、系统监控等)

* 新增或修改调查期是否应当同时对应着一次全体企业的发布通知？
* 用户权限管理：针对于每个用户设置其权限，这一个可设置的比较少？毕竟省市相关部门不会频繁变动，同时企业的变动也不会很快，仅当有企业用户注销、创建时才需要设置。
    * 当然也需要列举出所有的用户信息，例如企业名，联系方式，上一次登录系统时间
* 系统监控：系统监控查看当前系统工作情况，包括CPU、内存、硬盘等信息，这个主要涉及服务器的负载的监控。



