# 概要设计



### 一、数据库数据设计

组织机构代码可以依据身份证所属区号特点进行，角色的编码再加这是第多少家企业。

限制组织机构不可超过9位因此需要进行一定的取舍。

例如丽江市某日备案的企业，这是一家科技公司，是云南省丽江市备案的第520家企业，那么组织机构代码为07(所属地区)1(角色)000520(企业数)；这时在编码上会变的稍微麻烦点，需要用一个数组或哈希表存储每个地区已备案的企业数。

企业数的选择根据调研得知目前云南省大约有55万家注册的企业；那么随着时代的进步发展，为每个市预留999999个企业是合理的。

### **Table0:**

所有用户的表

是否备案成功

​                ● 政府：-1

​                ● 企业：0/1

如果使用组织机构代码+密码的形式登陆系统

在企业想要备案前，理论上会有一个登录的账号信息。

| **名称**          | **密码**          | **组织机构代码** | **是否备案成功** | **角色** |
| ----------------- | ----------------- | ---------------- | ---------------- | -------- |
| String类型 50字节 | String类型 30字节 | String类型 9字节 | bool 类型        | int类型  |
|                   |                   |                  |                  |          |

一列是否备案成功的意义是：如果一个企业未备案则进入备案业务流程；如果备案成功则进入填报数据业务流程。

### **Table1:**

这个表是省已经审核通过可以上报数据的企业的表。

这个表应该能作为最为重要的表格；以**组织机构代码为主键**、结合其他的数据表进行检索。

| **企业名称** | **组织机构代码** | **所属市** | **所属区** | **联系电话** |
| ------------ | ---------------- | ---------- | ---------- | ------------ |
| String类型   | String类型       | String类型 | String类型 | String类型   |

### **Table2:**

企业的信息，包括企业性质、所属行业、主要经营业务、联系人、联系地址、邮政编码、传真、EMAIL等一些并不是需要经常用到的信息。

| **组织机构代码** | **企业性质** | **所属行业** | **主要经营业务** | **联系人** | **联系地址** | **邮政编码** | **传真**   | **EMAIL**  | **是否通过备案** |
| ---------------- | ------------ | ------------ | ---------------- | ---------- | ------------ | ------------ | ---------- | ---------- | ---------------- |
| String类型       | String类型   | String类型   | String类型       | String类型 | String类型   | String类型   | String类型 | String类型 | Bool类型         |

### **Table3:**

当然在审核页面还要的就是一个表用来存储提交审核申请的表。这个地方**比较不确定的地方就是是否需要维护这么一个表就是保证数据都是正确的，也就是说只有审核通过后的数据才能放入Table2中，但是这时候矛盾就是这个Table3和Table2的几乎没有差别(这时Table2会没有最后一列)**

## **上报数据业务**

### **Table4:**

这个表名的命名可以按照：data_year_month_num；例如data_2023_09_0表示这是企业在2023年9月上报的数据，且这是企业填报的数据并未被修改。因此这个类型表会有很多个。

| **企业组织机构代码** | **建档期就业人数** | **调查期人数** | **其他原因** | **就业人数减少类型** | **主要原因** | **主要原因说明** | **次要原因** | **次要原因说明** | **第三原因** | **第三原因说明** | **是否被修改** |
| -------------------- | ------------------ | -------------- | ------------ | -------------------- | ------------ | ---------------- | ------------ | ---------------- | ------------ | ---------------- | -------------- |
| String类型           | int类型            | int类型        | xx           | xx                   | xx           | xx               | x x          | xx               | xx           | xx               | int类型        |

**如果调查期数据小于建档期数据，就业人数减少类型和就业人数减少主要原因及说明必填。？？？**

关于这个是否被修改的说明：仅有是否被修改被置为0时才有效；其余时刻置为被修改的次数，例如在data_2023_09_0中是否被修改数据为1，说明要查看data_2023_09_1；如果data_2023_09_1中是否被修改数据为2，说明要查看data_2023_09_2；如果data_2023_09_2中是否被修改数据为0，则表明该数据有效。

是否被修改改为状态位

| **所属市** | **状态** |
| ---------- | -------- |
|            |          |

## **通知业务**

### **Table5:**

政府

| **发布机构（省、市）** | **发布标题**      | **发布内容**        | **发布时间** | **已查看的企业数** | **针对的发布对象市** |
| ---------------------- | ----------------- | ------------------- | ------------ | ------------------ | -------------------- |
| String类型             | String类型 50字节 | String类型 1000字节 | String类型   | int类型            | String类型           |

针对的发布对象市可以这样定义：发布机构为省：如果针对全部市那就标记为11，如果针对个别市的话那就标记为0007（07依据市的区号进行填写）；发布机构为市：等同于针对个别市；这样也便于每个企业用户检索属于它的消息的代码的编写。

### **Table6:**

对于每个企业都应该有一个表格存储通知，作用是：在企业登陆系统时能显示到底有无未读消息

| **组织机构代码** | **发布机构** | **发布标题** | **发布内容** | **发布时间** | **是否查看** |
| ---------------- | ------------ | ------------ | ------------ | ------------ | ------------ |
| String类型       | String类型   | String类型   | String类型   | String类型   | bool类型     |

## **设置业务**

对于用户权限管理、注册可以在Table0中完成。

### **Table7:**

新增或修改调查期

| **调查期编号** | **开始时间** | **结束时间** | **是否已结束** | **索引表** |
| -------------- | ------------ | ------------ | -------------- | ---------- |
| int类型        | String类型   | String类型   | bool类型       | String类型 |

| 数据名称   | 类型 + 长度 | 是否主键 | 是否可以为空 | 备注                 |
| ---------- | ----------- | -------- | ------------ | -------------------- |
| 调查期编号 | int类型     | x        |              |                      |
| 开始时间   | String类型  |          |              |                      |
| 结束时间   | String类型  |          |              |                      |
| 是否已结束 | bool类型    |          |              | 0为未结束，1为已结束 |
| 索引表     | String类型  |          |              |                      |



设计是否已结束的目的就是能够直接匹配当前的调查期。

然后每新增加一个调查期会直接创建Table4





### 二、功能设计

#### 1. 用例图

![用例图](D:\桌面\用例图.png)





### 三、界面设计

